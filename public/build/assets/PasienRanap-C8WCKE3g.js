import{r as d,j as o}from"./app-BBba0pJ7.js";import{C as u,r as j}from"./chart-DC7W9FPT.js";u.register(...j);const I=({pasienRanap:c})=>{const i=d.useRef(null),l=d.useRef(null);return new Date().getFullYear(),d.useEffect(()=>{const b=i.current.getContext("2d");l.current&&l.current.destroy();const t=c.filter(e=>e.vvip>0||e.vip>0||e.kls1>0||e.kls2>0||e.kls3>0||e.kls_khusus>0),n=[...new Set(t.map(e=>e.jenis_pelayanan))];if(n.length===0){console.error("Tidak ada data jenis pelayanan yang ditemukan.");return}const p=n.map(e=>t.filter(r=>r.jenis_pelayanan===e).reduce((r,y)=>r+(y.kls3||0),0)),s=n.map((e,a)=>({label:e,totalKls3:p[a]})).sort((e,a)=>a.totalKls3-e.totalKls3).map(e=>e.label),g=s.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.vvip||0),0)),f=s.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.vip||0),0)),k=s.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.kls1||0),0)),h=s.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.kls2||0),0)),m=s.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.kls3||0),0)),x=s.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.kls_khusus||0),0));return l.current=new u(b,{type:"bar",data:{labels:s,datasets:[{label:"VVIP",data:g,backgroundColor:"rgba(255, 99, 132, 0.7)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1},{label:"VIP",data:f,backgroundColor:"rgba(54, 162, 235, 1)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Kelas I",data:k,backgroundColor:"rgba(255, 206, 86, 1)",borderColor:"rgba(255, 206, 86, 1)",borderWidth:1},{label:"Kelas II",data:h,backgroundColor:"rgba(75, 192, 192, 1)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Kelas III",data:m,backgroundColor:"rgba(153, 102, 255, 1)",borderColor:"rgba(153, 102, 255, 1)",borderWidth:1},{label:"Kelas Khusus",data:x,backgroundColor:"rgba(255, 159, 64, 1)",borderColor:"rgba(255, 159, 64, 1)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top",labels:{color:"rgb(176, 175, 153)",font:{size:10}}}},indexAxis:"y",scales:{x:{stacked:!0,beginAtZero:!0,ticks:{color:"rgb(176, 175, 153)"}},y:{stacked:!0,ticks:{color:"rgb(176, 175, 153)",font:{size:10}}}}}}),()=>{l.current&&l.current.destroy()}},[c]),o.jsx("div",{className:"p-5 w-full",children:o.jsx("div",{className:"bg-white dark:bg-indigo-950 overflow-hidden shadow-sm sm:rounded-lg w-full",children:o.jsxs("div",{className:"p-5 text-gray-900 dark:text-gray-100",children:[o.jsx("h1",{className:"uppercase text-center font-bold text-xl",children:"RL 3.1 - PASIEN RAWAT INAP RUANGAN"}),o.jsx("canvas",{ref:i})]})})})};export{I as default};
