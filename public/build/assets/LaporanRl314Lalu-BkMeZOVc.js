import{r as l,j as r}from"./app-BuzyEK5n.js";import{C as i,r as k}from"./chart-BMDz-jMM.js";i.register(...k);const x=({tahunLalu:d,laporanRl314Lalu:t})=>{const o=l.useRef(null),s=l.useRef(null);return l.useEffect(()=>{const b=o.current.getContext("2d");if(s.current&&s.current.destroy(),!t||t.length===0)return;const e=t.filter(a=>a.puskesmas+a.faskes+a.rs+a.kembaliPuskesmas+a.kembaliFaskes+a.kembaliRs+a.pasienRujukan+a.datangSendiri+a.diterimaKembali>100).map(a=>({...a,total:a.puskesmas+a.faskes+a.rs+a.kembaliPuskesmas+a.kembaliFaskes+a.kembaliRs+a.pasienRujukan+a.datangSendiri+a.diterimaKembali}));e.sort((a,n)=>n.total-a.total);const u=e.map(a=>a.deskripsi),c=[{label:"Puskesmas",data:e.map(a=>a.puskesmas),backgroundColor:"rgba(255, 99, 132, 0.5)"},{label:"Faskes",data:e.map(a=>a.faskes),backgroundColor:"rgba(54, 162, 235, 0.5)"},{label:"RS",data:e.map(a=>a.rs),backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Kembali Puskesmas",data:e.map(a=>a.kembaliPuskesmas),backgroundColor:"rgba(153, 102, 255, 0.5)"},{label:"Kembali Faskes",data:e.map(a=>a.kembaliFaskes),backgroundColor:"rgba(255, 159, 64, 0.5)"},{label:"Kembali RS",data:e.map(a=>a.kembaliRs),backgroundColor:"rgba(255, 205, 86, 0.5)"},{label:"Pasien Rujukan",data:e.map(a=>a.pasienRujukan),backgroundColor:"rgba(201, 203, 207, 0.5)"},{label:"Datang Sendiri",data:e.map(a=>a.datangSendiri),backgroundColor:"rgba(100, 149, 237, 0.5)"},{label:"Diterima Kembali",data:e.map(a=>a.diterimaKembali),backgroundColor:"rgba(60, 179, 113, 0.5)"}].filter(a=>a.data.some(n=>n>0));return s.current=new i(b,{type:"bar",data:{labels:u,datasets:c},options:{responsive:!0,interaction:{mode:"index",intersect:!1,axis:"y"},indexAxis:"y",plugins:{legend:{position:"top",labels:{color:"rgb(176, 175, 153)",font:{size:10}}}},scales:{x:{stacked:!0,beginAtZero:!0},y:{stacked:!0,ticks:{color:"rgb(176, 175, 153)",font:{size:10}}}}}}),()=>{s.current&&s.current.destroy()}},[t]),r.jsx("div",{className:"p-5 w-full",children:r.jsx("div",{className:"bg-white dark:bg-indigo-950 overflow-hidden shadow-sm sm:rounded-lg w-full",children:r.jsxs("div",{className:"p-5 text-gray-900 dark:text-gray-100",children:[r.jsxs("h1",{className:"uppercase text-center font-bold text-xl",children:["Laporan RL 3.14 - Rujukan ",d]}),r.jsx("canvas",{ref:o})]})})})};export{x as default};
