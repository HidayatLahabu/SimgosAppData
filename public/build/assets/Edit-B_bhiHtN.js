import{G as N,j as a,S as _}from"./app-BxEVUxSj.js";import{A as y}from"./AuthenticatedLayout-BQgQmp35.js";import"./transition-B8OuBj59.js";const c=e=>e?e.replace(" ","T"):"",g=e=>e??"-";function A({auth:e,kunjungan:n,ruanganList:d}){var m;const l=((m=e==null?void 0:e.user)==null?void 0:m.role)==="admin",{data:s,setData:i,put:b,processing:j}=N({nomor_pendaftaran:n.nomor_pendaftaran,nomor_kunjungan:n.nomor_kunjungan,norm:n.norm,nama_pasien:n.nama_pasien,ruangan_id:n.ruangan_id,ruangan_tujuan:n.ruangan_tujuan,dpjp:n.dpjp,tanggal_masuk:c(n.tanggal_masuk),tanggal_keluar:c(n.tanggal_keluar),status_kunjungan:n.status_kunjungan??1}),p=t=>{if(t.preventDefault(),!l){alert("Anda tidak memiliki hak akses untuk mengubah data kunjungan");return}b(route("kunjungan.update",s.nomor_kunjungan))},h=({label:t,value:v,onChange:f,options:k})=>a.jsxs("div",{className:"flex flex-col p-3 rounded bg-white dark:bg-indigo-900 border border-amber-300 text-sm",children:[a.jsx("label",{className:"text-amber-700 dark:text-amber-300 font-medium",children:t}),a.jsx("select",{value:v,onChange:f,disabled:!l,className:"mt-1 rounded px-2 py-1 bg-white dark:bg-indigo-950 border border-amber-300 disabled:opacity-60",children:k.map(o=>a.jsxs("option",{value:o.id,children:[o.id," - ",o.namaRuangan]},o.id))})]});return a.jsxs(y,{user:e.user,children:[a.jsx(_,{title:"Edit Kunjungan"}),a.jsx("div",{className:"py-5",children:a.jsx("div",{className:"max-w-8xl mx-auto sm:px-6 lg:px-5",children:a.jsx("div",{className:"bg-white dark:bg-indigo-900 overflow-hidden shadow-sm sm:rounded-lg",children:a.jsx("div",{className:"p-5 text-gray-900 dark:text-gray-100 dark:bg-indigo-950",children:a.jsxs("div",{className:"overflow-auto w-full",children:[a.jsxs("div",{className:"text-center mb-2",children:[a.jsx("h1",{className:"text-xl font-bold uppercase tracking-wide",children:"Edit Kunjungan"}),!l&&a.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Anda hanya memiliki akses lihat (read-only)"})]}),a.jsxs("form",{onSubmit:p,className:"space-y-8",children:[a.jsxs(w,{title:"Informasi Kunjungan",children:[a.jsxs(u,{children:[a.jsx(r,{label:"No Pendaftaran",value:s.nomor_pendaftaran}),a.jsx(r,{label:"No Kunjungan",value:s.nomor_kunjungan}),a.jsx(r,{label:"NORM",value:s.norm}),a.jsx(r,{label:"Nama Pasien",value:s.nama_pasien})]}),a.jsxs(u,{children:[a.jsx(r,{label:"Ruangan Tujuan",value:`${s.ruangan_id} - ${s.ruangan_tujuan}`}),a.jsx(r,{label:"DPJP",value:s.dpjp}),a.jsx(r,{label:"Tanggal Masuk",value:g(n.tanggal_masuk)}),a.jsx(r,{label:"Tanggal Keluar",value:g(n.tanggal_keluar)})]})]}),a.jsx(S,{title:"Edit Data Kunjungan",children:a.jsxs(K,{children:[a.jsx(h,{label:"Ruangan",value:s.ruangan_id,onChange:t=>i("ruangan_id",t.target.value),options:d}),a.jsx(x,{label:"Tanggal Masuk",type:"datetime-local",value:s.tanggal_masuk,onChange:t=>i("tanggal_masuk",t.target.value),disabled:!l}),a.jsx(x,{label:"Tanggal Keluar",type:"datetime-local",value:s.tanggal_keluar,onChange:t=>i("tanggal_keluar",t.target.value),disabled:!l}),a.jsx(D,{label:"Status Kunjungan",value:s.status_kunjungan,onChange:t=>i("status_kunjungan",t.target.value),disabled:!l})]})}),a.jsxs("div",{className:"flex justify-between pt-2",children:[a.jsx("a",{href:route("kunjungan.detail",s.nomor_kunjungan),className:"px-4 py-2 rounded bg-red-500 hover:bg-red-600 text-white text-sm",children:"Kembali"}),l&&a.jsx("button",{type:"submit",disabled:j,className:"px-5 py-2 rounded bg-amber-500 hover:bg-amber-600 text-gray-900 font-semibold text-sm disabled:opacity-50",children:"Simpan"})]})]})]})})})})})]})}const w=({title:e,children:n})=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-lg font-semibold border-b pb-2",children:e}),n]}),S=({title:e,children:n})=>a.jsxs("div",{className:"space-y-4 border-l-4 border-amber-400 bg-amber-50/60 dark:bg-indigo-800/40 p-4 rounded-md",children:[a.jsx("h2",{className:"text-lg font-semibold text-amber-700 dark:text-amber-300",children:e}),n]}),u=({children:e})=>a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:e}),K=({children:e})=>a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:e}),r=({label:e,value:n})=>a.jsxs("div",{className:"flex flex-col p-3 rounded bg-gray-50 dark:bg-indigo-800 border text-sm",children:[a.jsx("span",{className:"text-gray-200",children:e}),a.jsx("span",{className:"font-medium text-yellow-700 dark:text-yellow-500",children:n??"-"})]}),x=({label:e,type:n,value:d,onChange:l,disabled:s})=>a.jsxs("div",{className:"flex flex-col p-3 rounded bg-white dark:bg-indigo-900 border border-amber-300 text-sm",children:[a.jsx("label",{className:"text-amber-700 dark:text-amber-300 font-medium",children:e}),a.jsx("input",{type:n,value:d,onChange:l,disabled:s,className:`
                mt-1 rounded px-2 py-1
                bg-white dark:bg-indigo-950
                border border-amber-300
                disabled:opacity-60
            `})]}),D=({label:e,value:n,onChange:d,disabled:l})=>a.jsxs("div",{className:"flex flex-col p-3 rounded bg-white dark:bg-indigo-900 border border-amber-300 text-sm",children:[a.jsx("label",{className:"text-amber-700 dark:text-amber-300 font-medium",children:e}),a.jsxs("select",{value:n,onChange:d,disabled:l,className:`
                mt-1 rounded px-2 py-1
                bg-white dark:bg-indigo-950
                border border-amber-300
                disabled:opacity-60
            `,children:[a.jsx("option",{value:0,children:"Batal"}),a.jsx("option",{value:1,children:"Sedang Dilayani"}),a.jsx("option",{value:2,children:"Selesai"})]})]});export{A as default};
