import{r as d,j as n}from"./app-BvtyTJlx.js";import{C as u,r as x}from"./chart-DC7W9FPT.js";u.register(...x);const j=({pasienMasukKeluar:i})=>{const c=d.useRef(null),s=d.useRef(null);return new Date().getFullYear(),d.useEffect(()=>{const b=c.current.getContext("2d");s.current&&s.current.destroy();const t=i.filter(e=>e.awal>0||e.masuk>0||e.keluar>0||e.mati>0),o=[...new Set(t.map(e=>e.jenis_pelayanan))];if(o.length===0){console.error("Tidak ada data jenis pelayanan yang ditemukan.");return}const g=o.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.masuk||0),0)),l=o.map((e,a)=>({label:e,totalMasuk:g[a]})).sort((e,a)=>a.totalMasuk-e.totalMasuk).map(e=>e.label),p=l.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.awal||0),0)),f=l.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.masuk||0),0)),k=l.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.keluar||0),0)),m=l.map(e=>t.filter(a=>a.jenis_pelayanan===e).reduce((a,r)=>a+(r.mati||0),0));return s.current=new u(b,{type:"bar",data:{labels:l,datasets:[{label:"Awal",data:p,backgroundColor:"rgba(75, 192, 192)",borderColor:"rgba(75, 192, 192)",borderWidth:1},{label:"Masuk",data:f,backgroundColor:"rgba(54, 162, 235",borderColor:"rgba(54, 162, 235)",borderWidth:1},{label:"Keluar",data:k,backgroundColor:"rgba(255, 99, 132)",borderColor:"rgba(255, 99, 132)",borderWidth:1},{label:"Mati",data:m,backgroundColor:"rgba(153, 102, 255)",borderColor:"rgba(153, 102, 255)",borderWidth:1}]},options:{responsive:!0,interaction:{mode:"index",intersect:!1,axis:"y"},plugins:{legend:{position:"top",labels:{color:"rgb(176, 175, 153)",font:{size:11}}}},indexAxis:"y",scales:{x:{stacked:!0,beginAtZero:!0,ticks:{color:"rgb(176, 175, 153)"}},y:{stacked:!0,ticks:{color:"rgb(176, 175, 153)",font:{size:10}}}}}}),()=>{s.current&&s.current.destroy()}},[i]),n.jsx("div",{className:"p-5 w-full",children:n.jsx("div",{className:"bg-white dark:bg-indigo-950 overflow-hidden shadow-sm sm:rounded-lg w-full",children:n.jsxs("div",{className:"p-5 text-gray-900 dark:text-gray-100",children:[n.jsx("h1",{className:"uppercase text-center font-bold text-xl",children:"RL 3.1 - PASIEN AWAL, MASUK & KELUAR"}),n.jsx("canvas",{ref:c})]})})})};export{j as default};
