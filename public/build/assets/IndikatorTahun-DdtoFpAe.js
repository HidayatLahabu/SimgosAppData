import{r as n,j as e}from"./app-D4XQV-ww.js";import{C as p,r as w}from"./chart-BMDz-jMM.js";p.register(...w);const m=({indikatorPelayananTahunan:d})=>{const c=n.useRef(null),s=n.useRef(null);return n.useEffect(()=>{s.current&&s.current.destroy();const v=c.current.getContext("2d"),b=new Set;d.forEach(o=>{o.tahun&&b.add(o.tahun)});let a=Array.from(b).sort();a.length>5&&(a=a.slice(a.length-5));const t={};d.forEach(o=>{const r=o.tahun;!r||!a.includes(r)||(t[r]||(t[r]={bor:0,avlos:0,bto:0,toi:0,ndr:0,gdr:0,count:0}),t[r].bor+=o.bor||0,t[r].avlos+=o.avlos||0,t[r].bto+=o.bto||0,t[r].toi+=o.toi||0,t[r].ndr+=o.ndr||0,t[r].gdr+=o.gdr||0,t[r].count+=1)});const l={};a.forEach(o=>{const r=t[o];r&&r.count>0?l[o]={bor:+(r.bor/r.count).toFixed(2),avlos:+(r.avlos/r.count).toFixed(2),bto:+(r.bto/r.count).toFixed(2),toi:+(r.toi/r.count).toFixed(2),ndr:+(r.ndr/r.count).toFixed(2),gdr:+(r.gdr/r.count).toFixed(2)}:l[o]={bor:0,avlos:0,bto:0,toi:0,ndr:0,gdr:0}});const C=a,u=[],i=[],g=[],h=[],f=[],x=[];return a.forEach(o=>{const r=l[o];u.push(r.bor),i.push(r.avlos),g.push(r.bto),h.push(r.toi),f.push(r.ndr),x.push(r.gdr)}),s.current=new p(v,{type:"bar",data:{labels:C,datasets:[{label:"BOR",data:u,backgroundColor:"rgba(54, 162, 235)",borderColor:"rgba(54, 162, 235)",borderWidth:1},{label:"AVLOS",data:i,backgroundColor:"rgba(255, 206, 86)",borderColor:"rgba(255, 206, 86)",borderWidth:1},{label:"BTO",data:g,backgroundColor:"rgba(75, 192, 192)",borderColor:"rgba(75, 192, 192)",borderWidth:1},{label:"TOI",data:h,backgroundColor:"rgba(153, 102, 255)",borderColor:"rgba(153, 102, 255)",borderWidth:1},{label:"NDR",data:f,backgroundColor:"rgba(255, 99, 132)",borderColor:"rgba(255, 99, 132)",borderWidth:1},{label:"GDR",data:x,backgroundColor:"rgba(255, 159, 64)",borderColor:"rgba(255, 159, 64)",borderWidth:1}]},options:{responsive:!0,plugins:{legend:{position:"top",labels:{color:"rgb(176, 175, 153)",font:{size:10}}}},scales:{y:{beginAtZero:!0,ticks:{color:"rgb(176, 175, 153)"}},x:{ticks:{color:"rgb(176, 175, 153)"}}}}}),()=>{s.current&&s.current.destroy()}},[d]),e.jsx("div",{className:"p-5 flex flex-wrap w-full",children:e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"max-w-full mx-auto w-full",children:e.jsx("div",{className:"bg-white dark:bg-indigo-950 overflow-hidden shadow-sm sm:rounded-lg w-full",children:e.jsxs("div",{className:"p-5 text-gray-900 dark:text-gray-100 w-full",children:[e.jsx("h1",{className:"uppercase text-center font-bold text-xl",children:"Indikator Pelayanan Tahunan"}),e.jsx("canvas",{ref:c})]})})})})})};export{m as default};
